#### 关于我为什么要写这个文档

其实这是我研究生课题要做的工作。

##### 研究生期间课题！

<font color="red"> 基于蒙特卡罗算法几何建模的研究 </font>

其实一开始接手这个课题我也是懵逼的，根本不理解这个课题到底有多难。什么是<font color="red">蒙特卡罗</font>算法？算法的几何建模研究怎么开展？和我本科接触的<font color="blue">Ansys MagNet</font>等建模计算有无关联？还是不是用现有的商业软件建立计算模型交给后台计算？

后来发现，这个课题中的<font color="blue">几何建模</font>研究和我所接触过的研究几乎完全不同！

##### 浅谈一下研究背景！

因为<font color="red">蒙特卡罗</font>算法的一些算法限制，其<font color="red">处理几何</font>的能力是比较有限的。目前行业内应用这个算法的程序，90%以上是基于<font color="red">CSG(Constructive Solid Geometry)</font>几何进行建模计算。但是由于<font color="red">CSG</font>几何**发展缓慢，应用面窄**，因此并没有形成一套成熟的**标准格式**，也没有一套成熟的**商业软件**。甚至到目前为止，**CSG**几何的文本文件都是靠人手动去书写的，更别说用现有的针对**CSG几何开发出的界面**了。

相比而言，<font color="red">CAD( Computer Aided Design )</font>几何因为**起步晚，应用广**的原因，相应的**几何内核**和**商业软件**应运而生。各个行业和领域对于CAD几何的依赖越来越强，也会有非常多好用的开源的**<font color="red">CAD几何引擎</font>**供大家使用（非常重要的原因在于可以使用别人开发好的**几何界面**）。

##### 为什么做这个研究！

随着行业的发展，**手动建模CSG**几何已经不能满足使用了，越来越多的复杂几何模型消耗大量的人力资源，据说有一个计算模型消耗了**10人年**的工作量，并且几何模型越复杂，模型出错的概率就越大。

用现有的**CAD商业软件**建模，通过**算法转化为CSG几何**的文本输入，是这个课题的核心内容。当然为了工作完整性，为了给本土开发的**蒙特卡罗**计算软件添加界面，就需要做**界面开发**等等一些其他工作。

##### 难点！！！

有人可能好奇，不就是两种几何格式的转换，为什么研究这么久还没有好的结果？基于我自己的理解，大概总结以下几个方面。

###### 算法方面

1. CAD是基于点线面的几何表达，没有对几何宏观的描述，而CSG是基于半空间布尔运算的几何表达。**两种几何方法在构成实体过程是相反的，尤其是从CAD-CSG**；
2. CAD几何可以构成复杂几何，其中包含大量**凹体**。CSG处理凸体比较简单，但是对凹体处理能力很有限。一般采用将**CAD模型分割成凸实体的办法**；
3. 分割过程本就是非常复杂的过程。如果算法能有人的意识，看到一个实体就能通过其特征很好地选出剖分面，得到好的剖分结果。但是前面也提到CAD是对点线面的描述，没有对几何的宏观概念。因此难点就在于**剖分算法的设计**；

###### 技术方面

1. CAD有成熟的几何引擎，有标准的几何输出格式，而CSG没有，每个团队开发出来的CSG表达都不相同。导致**没有现成的转换算法可用**；

2. 基于CAD几何引擎开发转换算法是必经之路，但是难度较大。以OCCT为例，就有多达几千个类的使用，**了解这些类的作用并熟练使用是必经之路**；

3. 蒙特卡罗算法对**模型精度**要求很高，例如两个线相交就是相交，不相交就是不相交。但是CAD中，存在**容差**的概念，在不同的**容差**下，两个线可能相交，也可能不相交。因此CAD模型转换到CSG模型并不是工作的终点，**需要蒙特卡罗算法计算验证通过**。

##### 结语

总之我在做这个课题碰到了很多难题，遇到了很多坑，因此有了想记录下开发研究过程的想法。假如这个课题在课题组有人能接着做，那这也将作为他的有用的指导文件。如果这个课题到此为止，那也希望能够给需要的人一些指引。